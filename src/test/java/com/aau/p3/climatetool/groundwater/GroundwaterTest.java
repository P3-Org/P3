package com.aau.p3.climatetool.groundwater;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import java.util.List;

import static org.junit.jupiter.api.Assertions.*;

class GroundwaterTest {
    String json;

    @Test
    void testExtractKote() {
        String jsontest = """
        {
          "kote": 12.34
        }
        """;


        double result = Groundwater.extractKote(new StringBuilder(jsontest));

        assertEquals(12.34, result, 0.0001);
    }



    @Test
    void testExtractHValues() {
        String json = """
        {
          "statistik": {
            "samlet": [
              { "h2":1.1, "h5":2.2, "h10":3.3, "h20":4.4, "h50":5.5, "h100":6.6 }
            ]
          }
        }
        """;

        List<Double> values = Groundwater.extractHValues(new StringBuilder(json));

        assertEquals(6, values.size());
        assertEquals(1.1, values.get(0), 0.0001);
        assertEquals(6.6, values.get(5), 0.0001);
    }

    @Test
    void testExtractKoteFull(){

        double result = Groundwater.extractKote(new StringBuilder(json));

        assertEquals(43.98, result, 0.01);
    }


    @BeforeEach
    void setUp(){
        json = """
        {
            "tileId": "63553_5783",
                "kote": 43.9834098815918,
                "geometry": "POINT (578350.0000000075 6355349.999999993)",
                "statistik": {
            "maaned": [
            {
                "cellPointId": 2855544,
                    "maaned": "Januar",
                    "p01": 32.3668365478516,
                    "p05": 32.5223159790039,
                    "p10": 32.6257553100586,
                    "p25": 33.0945510864258,
                    "p50": 33.6647262573242,
                    "p75": 34.0270881652832,
                    "p90": 34.3847846984863,
                    "p95": 34.5964164733887,
                    "p99": 34.7964706420898,
                    "id": 431408
            },
            {
                "cellPointId": 2855544,
                    "maaned": "Februar",
                    "p01": 32.4813652038574,
                    "p05": 32.614372253418,
                    "p10": 32.9057502746582,
                    "p25": 33.259464263916,
                    "p50": 33.8037490844727,
                    "p75": 34.288215637207,
                    "p90": 34.6844863891602,
                    "p95": 34.807430267334,
                    "p99": 34.9359550476074,
                    "id": 715471
            },
            {
                "cellPointId": 2855544,
                    "maaned": "Marts",
                    "p01": 32.5769653320312,
                    "p05": 32.8236198425293,
                    "p10": 32.955638885498,
                    "p25": 33.4149589538574,
                    "p50": 33.8677520751953,
                    "p75": 34.3122673034668,
                    "p90": 34.8403091430664,
                    "p95": 35.0496520996094,
                    "p99": 40.1599960327148,
                    "id": 812252
            },
            {
                "cellPointId": 2855544,
                    "maaned": "April",
                    "p01": 32.6585998535156,
                    "p05": 32.7114219665527,
                    "p10": 32.9337768554688,
                    "p25": 33.3739318847656,
                    "p50": 33.8904190063477,
                    "p75": 34.2180938720703,
                    "p90": 34.7972602844238,
                    "p95": 34.9402809143066,
                    "p99": 35.1337661743164,
                    "id": 880363
            },
            {
                "cellPointId": 2855544,
                    "maaned": "Maj",
                    "p01": 32.5047302246094,
                    "p05": 32.7367553710938,
                    "p10": 32.8549499511719,
                    "p25": 33.220588684082,
                    "p50": 33.7431945800781,
                    "p75": 34.1203994750977,
                    "p90": 34.6190452575684,
                    "p95": 34.7879028320312,
                    "p99": 34.8821907043457,
                    "id": 941334
            },
            {
                "cellPointId": 2855544,
                    "maaned": "Juni",
                    "p01": 32.3807907104492,
                    "p05": 32.5946578979492,
                    "p10": 32.851188659668,
                    "p25": 33.0609436035156,
                    "p50": 33.5802383422852,
                    "p75": 34.0035705566406,
                    "p90": 34.4076690673828,
                    "p95": 34.6767578125,
                    "p99": 34.8454399108887,
                    "id": 1017027
            },
            {
                "cellPointId": 2855544,
                    "maaned": "Juli",
                    "p01": 32.29150390625,
                    "p05": 32.456901550293,
                    "p10": 32.6871910095215,
                    "p25": 32.9622077941895,
                    "p50": 33.4362678527832,
                    "p75": 33.8918113708496,
                    "p90": 34.2261428833008,
                    "p95": 34.581127166748,
                    "p99": 34.814754486084,
                    "id": 25984773
            },
            {
                "cellPointId": 2855544,
                    "maaned": "August",
                    "p01": 32.2362518310547,
                    "p05": 32.342601776123,
                    "p10": 32.5281982421875,
                    "p25": 32.8011817932129,
                    "p50": 33.2919578552246,
                    "p75": 33.7087211608887,
                    "p90": 34.0618896484375,
                    "p95": 34.4488906860352,
                    "p99": 34.6769104003906,
                    "id": 26247506
            },
            {
                "cellPointId": 2855544,
                    "maaned": "September",
                    "p01": 32.1617279052734,
                    "p05": 32.2737846374512,
                    "p10": 32.3929443359375,
                    "p25": 32.7093505859375,
                    "p50": 33.2383041381836,
                    "p75": 33.558780670166,
                    "p90": 34.1190872192383,
                    "p95": 34.2614250183105,
                    "p99": 34.4863357543945,
                    "id": 26285853
            },
            {
                "cellPointId": 2855544,
                    "maaned": "Oktober",
                    "p01": 32.1641159057617,
                    "p05": 32.2119941711426,
                    "p10": 32.3323135375977,
                    "p25": 32.644115447998,
                    "p50": 33.1386680603027,
                    "p75": 33.4994239807129,
                    "p90": 33.9447898864746,
                    "p95": 34.0622520446777,
                    "p99": 34.2794342041016,
                    "id": 26294725
            },
            {
                "cellPointId": 2855544,
                    "maaned": "November",
                    "p01": 32.1221313476562,
                    "p05": 32.2877807617188,
                    "p10": 32.3177185058594,
                    "p25": 32.8199462890625,
                    "p50": 33.2166366577148,
                    "p75": 33.5998268127441,
                    "p90": 33.9881134033203,
                    "p95": 34.0896606445312,
                    "p99": 34.2307472229004,
                    "id": 26852566
            },
            {
                "cellPointId": 2855544,
                    "maaned": "December",
                    "p01": 32.0821838378906,
                    "p05": 32.2706069946289,
                    "p10": 32.5550918579102,
                    "p25": 32.9315376281738,
                    "p50": 33.3731842041016,
                    "p75": 33.8455123901367,
                    "p90": 34.138916015625,
                    "p95": 34.3560485839844,
                    "p99": 34.6187896728516,
                    "id": 27116336
            }
    ],
            "saeson": [
            {
                "cellPointId": 2855544,
                    "saeson": "Vinter",
                    "p01": 32.1706008911133,
                    "p05": 32.5036926269531,
                    "p10": 32.6253395080566,
                    "p25": 33.0740203857422,
                    "p50": 33.5869560241699,
                    "p75": 34.0395889282227,
                    "p90": 34.4012107849121,
                    "p95": 34.6666450500488,
                    "p99": 34.8592071533203,
                    "id": 373672
            },
            {
                "cellPointId": 2855544,
                    "saeson": "Forår",
                    "p01": 32.5732154846191,
                    "p05": 32.7425918579102,
                    "p10": 32.9091796875,
                    "p25": 33.3541641235352,
                    "p50": 33.8351745605469,
                    "p75": 34.2291717529297,
                    "p90": 34.7383232116699,
                    "p95": 34.8853759765625,
                    "p99": 35.1564674377441,
                    "id": 554054
            },
            {
                "cellPointId": 2855544,
                    "saeson": "Sommer",
                    "p01": 32.2595367431641,
                    "p05": 32.420108795166,
                    "p10": 32.6424980163574,
                    "p25": 32.9721984863281,
                    "p50": 33.4557113647461,
                    "p75": 33.8931732177734,
                    "p90": 34.3525466918945,
                    "p95": 34.5771331787109,
                    "p99": 34.807373046875,
                    "id": 597391
            },
            {
                "cellPointId": 2855544,
                    "saeson": "Efterår",
                    "p01": 32.144157409668,
                    "p05": 32.2407302856445,
                    "p10": 32.3251800537109,
                    "p25": 32.7189178466797,
                    "p50": 33.1876983642578,
                    "p75": 33.5473823547363,
                    "p90": 33.9821701049805,
                    "p95": 34.1484413146973,
                    "p99": 34.3650436401367,
                    "id": 609339
            }
    ],
            "samlet": [
            {
                "cellPointId": 2855544,
                    "p01": 32.186595916748,
                    "p05": 32.3957366943359,
                    "p10": 32.6083488464355,
                    "p25": 32.9969635009766,
                    "p50": 33.4835891723633,
                    "p75": 33.957763671875,
                    "p90": 34.3943634033203,
                    "p95": 34.676872253418,
                    "p99": 34.9613876342773,
                    "h2": 34.7909049987793,
                    "h5": 37.3815612792969,
                    "h10": 39.7146873474121,
                    "h20": 42.5667266845703,
                    "h50": 43.9834098815918,
                    "h100": 43.9834098815918,
                    "id": 132251
            }
    ]
        }
        }
        """;
    }


}